(function(window,angular,undefined){'use strict';var copy=angular.copy,equals=angular.equals,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,jqLite=angular.element,noop=angular.noop,toJson=angular.toJson;function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent}))(),extra);}var ngRouteModule=angular.module('ngRoute',['ng']).provider('$route',$RouteProvider);function $RouteProvider(){var routes={};this.when=function(path,route){routes[path]=extend({reloadOnSearch:true},route,path&&pathRegExp(path,route));if(path){var redirectPath=(path[path.length-1]=='/')?path.substr(0,path.length-1):path+'/';routes[redirectPath]=extend({redirectTo:path},pathRegExp(redirectPath,route));}return this;};function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];path=path.replace(/([().])/g,'\\$1').replace(/(\/)?:(\w+)([\?|\*])?/g,function(_,slash,key,option){var optional=option==='?'?option:null;var star=option==='*'?option:null;keys.push({name:key,optional:!!optional});slash=slash||'';return''+(optional?'':slash)+'(?:'+(optional?slash:'')+(star&&'(.+)?'||'([^/]+)?')+')'+(optional||'');}).replace(/([\/$\*])/g,'\\$1');ret.regexp=new RegExp('^'+path+'$',insensitive?'i':'');return ret;}this.otherwise=function(params){this.when(null,params);return this;};this.$get=['$rootScope','$location','$routeParams','$q','$injector','$http','$templateCache','$sce',function($rootScope,$location,$routeParams,$q,$injector,$http,$templateCache,$sce){var forceReload=false,$route={routes:routes,reload:function(){forceReload=true;$rootScope.$evalAsync(updateRoute);}};$rootScope.$on('$locationChangeSuccess',updateRoute);return $route;function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;var N=0;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1];var val='string'==typeof m[i]?decodeURIComponent(m[i]):m[i];if(key&&val){params[key.name]=val;}}return params;}function updateRoute(){var next=parseRoute(),last=$route.current;if(next&&last&&next.$$route===last.$$route&&equals(next.pathParams,last.pathParams)&&!next.reloadOnSearch&&!forceReload){last.params=next.params;copy(last.params,$routeParams);$rootScope.$broadcast('$routeUpdate',last);}else if(next||last){forceReload=false;$rootScope.$broadcast('$routeChangeStart',next,last);$route.current=next;if(next){if(next.redirectTo){if(isString(next.redirectTo)){$location.path(interpolate(next.redirectTo,next.params)).search(next.params).replace();}else{$location.url(next.redirectTo(next.pathParams,$location.path(),$location.search())).replace();}}}$q.when(next).then(function(){if(next){var locals=extend({},next.resolve),template,templateUrl;forEach(locals,function(value,key){locals[key]=isString(value)?$injector.get(value):$injector.invoke(value);});if(isDefined(template=next.template)){if(isFunction(template)){template=template(next.params);}}else if(isDefined(templateUrl=next.templateUrl)){if(isFunction(templateUrl)){templateUrl=templateUrl(next.params);}templateUrl=$sce.getTrustedResourceUrl(templateUrl);if(isDefined(templateUrl)){next.loadedTemplateUrl=templateUrl;template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data;});}}if(isDefined(template)){locals['$template']=template;}return $q.all(locals);}}).then(function(locals){if(next==$route.current){if(next){next.locals=locals;copy(next.params,$routeParams);}$rootScope.$broadcast('$routeChangeSuccess',next,last);}},function(error){if(next==$route.current){$rootScope.$broadcast('$routeChangeError',next,last,error);}});}}function parseRoute(){var params,match;forEach(routes,function(route,path){if(!match&&(params=switchRouteMatcher($location.path(),route))){match=inherit(route,{params:extend({},$location.search(),params),pathParams:params});match.$$route=route;}});return match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}});}function interpolate(string,params){var result=[];forEach((string||'').split(':'),function(segment,i){if(i==0){result.push(segment);}else{var segmentMatch=segment.match(/(\w+)(.*)/);var key=segmentMatch[1];result.push(params[key]);result.push(segmentMatch[2]||'');delete params[key];}});return result.join('');}}];}ngRouteModule.provider('$routeParams',$RouteParamsProvider);function $RouteParamsProvider(){this.$get=function(){return{};};}var NG_VIEW_PRIORITY=500;var ngViewDirective=['$route','$anchorScroll','$compile','$controller','$animate',function($route,$anchorScroll,$compile,$controller,$animate){return{restrict:'ECA',terminal:true,priority:NG_VIEW_PRIORITY,compile:function(element,attr){var onloadExp=attr.onload||'';element.html('');var anchor=jqLite(document.createComment(' ngView '));element.replaceWith(anchor);return function(scope){var currentScope,currentElement;scope.$on('$routeChangeSuccess',update);update();function cleanupLastView(){if(currentScope){currentScope.$destroy();currentScope=null;}if(currentElement){$animate.leave(currentElement);currentElement=null;}}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(template){cleanupLastView();currentScope=scope.$new();currentElement=element.clone();currentElement.html(template);$animate.enter(currentElement,null,anchor);var link=$compile(currentElement,false,NG_VIEW_PRIORITY-1),current=$route.current;if(current.controller){locals.$scope=currentScope;var controller=$controller(current.controller,locals);if(current.controllerAs){currentScope[current.controllerAs]=controller;}currentElement.data('$ngControllerController',controller);currentElement.children().data('$ngControllerController',controller);}current.scope=currentScope;link(currentScope);currentScope.$emit('$viewContentLoaded');currentScope.$eval(onloadExp);$anchorScroll();}else{cleanupLastView();}}}}};}];ngRouteModule.directive('ngView',ngViewDirective);})(window,window.angular);